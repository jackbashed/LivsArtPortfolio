<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BashArt</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap');

    /* Basic CSS reset */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Poppins", "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: radial-gradient(circle at top, #fdf2f8 0%, #f8f9ff 35%, #eef2ff 100%);
      color: #2d2a44;
      padding: 40px 20px;
    }

    h1 {
      text-align: center;
      margin-bottom: 40px;
      font-size: clamp(2rem, 3vw, 3rem);
      letter-spacing: 1px;
    }

    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 30px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .gallery-item {
      background: rgba(255, 255, 255, 0.92);
      border-radius: 18px;
      overflow: visible;
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      box-shadow: 0 10px 30px rgba(57, 68, 128, 0.12);
      transition: transform 0.35s ease, box-shadow 0.35s ease;
      outline: none;
      padding: 18px 18px 22px;
      gap: 18px;
    }

    .gallery-item--large {
      grid-column: span 2;
    }

    .gallery-item--large img {
      max-width: min(100%, 640px);
    }

    .gallery-item:focus-visible {
      box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.5), 0 12px 35px rgba(57, 68, 128, 0.18);
      transform: translateY(-6px);
    }

    .gallery-item:hover {
      transform: translateY(-10px);
      box-shadow: 0 18px 40px rgba(57, 68, 128, 0.2);
    }

    .gallery-item img {
      max-width: 100%;
      width: auto;
      height: auto;
      display: block;
      margin: 0 auto;
      border-radius: 14px;
      box-shadow: 0 12px 32px rgba(57, 68, 128, 0.14);
    }

    .caption {
      width: 100%;
      padding: 0 12px;
      font-size: 1rem;
      text-align: center;
      word-wrap: break-word;
      line-height: 1.5;
      color: #3a365f;
      letter-spacing: 0.3px;
    }

    @media (max-width: 640px) {
      body {
        padding: 24px 16px 40px;
      }

      .gallery-item {
        padding: 14px 14px 18px;
        gap: 14px;
      }

      .gallery-item--large {
        grid-column: span 1;
      }
    }

    /* -------------------
       Modal / Lightbox CSS
       ------------------- */
    .modal {
      display: none;
      position: fixed;
      z-index: 9999;
      inset: 0;
      width: 100%;
      height: 100%;
      padding: 40px 24px;
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.85), rgba(79, 70, 229, 0.85));
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(6px);
    }

    .modal-content {
      max-width: min(1200px, 95vw);
      max-height: 95vh;
      width: auto;
      height: auto;
      margin: auto;
      display: block;
      border-radius: 18px;
      border: 6px solid rgba(255, 255, 255, 0.85);
      box-shadow: 0 25px 70px rgba(15, 23, 42, 0.45);
    }

    .close {
      position: absolute;
      top: 26px;
      right: 36px;
      color: rgba(255, 255, 255, 0.9);
      font-size: clamp(2.2rem, 4vw, 3rem);
      font-weight: 500;
      cursor: pointer;
      transition: transform 0.2s ease, color 0.2s ease;
    }

    .close:hover {
      color: #fff;
      transform: scale(1.1);
    }
  </style>
</head>

<body>

  <h1>Olivia Bashaw's Artwork Portfolio</h1>
  <p style="text-align: center; max-width: 600px; margin: 0 auto 32px; font-size: 1.15rem;">
    Olivia is interested in many mediums of art, from painting and sketching to sculpting and modeling. Explore
    her diverse portfolio below.
  </p>
  <!-- Container where images will be dynamically added -->
  <div class="gallery" id="galleryContainer"></div>

  <!-- 
  The modal container, initially hidden.
  Will become visible when an image is clicked.
-->
  <div id="myModal" class="modal">
    <span class="close">&times;</span>
    <img class="modal-content" id="modalImg" alt="">
  </div>

  <script>
    // Replace with your own GitHub account & repo details:
    const GITHUB_USERNAME = "jackbashed";
    const REPO_NAME = "LivsArtPortfolio";
    const BRANCH_NAME = "main"; // or "master"

    // Build the API URL that fetches contents of the "images" folder
    const API_URL = `https://api.github.com/repos/${GITHUB_USERNAME}/${REPO_NAME}/contents/images?ref=${BRANCH_NAME}`;

    // Grab references to modal elements
    const modal = document.getElementById('myModal');
    const modalImg = document.getElementById('modalImg');
    const closeBtn = document.querySelector('.close');

    // Close the modal when the X is clicked
    closeBtn.addEventListener('click', function () {
      modal.style.display = 'none';
    });

    // Also close the modal when user clicks anywhere outside the image
    window.addEventListener('click', function (event) {
      if (event.target === modal) {
        modal.style.display = 'none';
      }
    });

    // Close on Escape for accessibility
    document.addEventListener('keydown', function (event) {
      if (event.key === 'Escape' && modal.style.display === 'flex') {
        modal.style.display = 'none';
      }
    });

    const SIZE_MARKERS = {
      big: 'large',
      hero: 'large',
      large: 'large',
      xl: 'large'
    };

    function parseImageFilename(baseName) {
      const metadata = {
        order: 9999,
        name: baseName.trim(),
        size: 'normal'
      };

      const orderMatch = baseName.match(/^(\d+)\s*(.*)$/);
      let remainder = baseName.trim();

      if (orderMatch) {
        metadata.order = parseInt(orderMatch[1], 10);
        remainder = orderMatch[2].trim();
      }

      if (!remainder) {
        metadata.name = metadata.name || baseName.trim();
        return metadata;
      }

      const words = remainder.split(/\s+/);
      const filteredWords = [];

      words.forEach(word => {
        const normalized = word.toLowerCase().replace(/[^a-z0-9]/g, '');
        if (SIZE_MARKERS[normalized]) {
          metadata.size = SIZE_MARKERS[normalized];
        } else {
          filteredWords.push(word);
        }
      });

      if (filteredWords.length) {
        metadata.name = filteredWords.join(' ').trim();
      } else {
        metadata.name = remainder;
      }

      if (!metadata.name) {
        metadata.name = baseName.trim() || baseName;
      }

      return metadata;
    }

    // Function to fetch and display images
    fetch(API_URL)
      .then(response => {
        if (!response.ok) {
          throw new Error("Network response was not ok " + response.statusText);
        }
        return response.json();
      })
      .then(files => {
        const galleryContainer = document.getElementById('galleryContainer');
        const imagesArray = [];

        files.forEach(file => {
          // Only process if it's a file with a supported image extension
          if (file.type === "file") {
            const extension = file.name.split(".").pop().toLowerCase();
            if (["jpg", "jpeg", "png", "gif"].includes(extension)) {
              // Remove the extension to get the base name
              const baseName = file.name.substring(0, file.name.lastIndexOf("."));

              const metadata = parseImageFilename(baseName);

              imagesArray.push({
                order: metadata.order,
                name: metadata.name,
                size: metadata.size,
                url: file.download_url
              });
            }
          }
        });

        // Sort by the numeric prefix (order)
        imagesArray.sort((a, b) => a.order - b.order);

        // Create gallery items in sorted order
        imagesArray.forEach(imageObj => {
          const galleryItem = document.createElement('div');
          galleryItem.className = 'gallery-item';
          galleryItem.tabIndex = 0;
          galleryItem.setAttribute('role', 'button');
          galleryItem.setAttribute('aria-label', `View ${imageObj.name} larger`);

          if (imageObj.size === 'large') {
            galleryItem.classList.add('gallery-item--large');
          }

          const img = document.createElement('img');
          img.src = imageObj.url;
          img.alt = imageObj.name;

          const caption = document.createElement('div');
          caption.className = 'caption';
          caption.textContent = imageObj.name;

          const openModal = function () {
            modalImg.src = imageObj.url;
            modalImg.alt = imageObj.name;
            modal.style.display = 'flex'; // Use flex to center align
          };

          // On click, show the modal with the large version
          galleryItem.addEventListener('click', openModal);

          galleryItem.addEventListener('keydown', function (event) {
            if (event.key === 'Enter' || event.key === ' ') {
              event.preventDefault();
              openModal();
            }
          });

          galleryItem.appendChild(img);
          galleryItem.appendChild(caption);
          galleryContainer.appendChild(galleryItem);
        });
      })
      .catch(error => {
        console.error("Error fetching images:", error);
      });
  </script>

</body>

</html>